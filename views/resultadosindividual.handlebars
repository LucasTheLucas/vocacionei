<!-- Importa Bootstrap e Bootstrap Table -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.1/dist/bootstrap-table.min.css">

<div class="p-3">
  <div class="container">
    <h2 id="pessoa" class="text-center my-4"></h2>
  </div>

  <div class="container mb-4">
    <canvas id="meuGrafico" height="120"></canvas>
  </div>

<!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://unpkg.com/bootstrap-table@1.21.1/dist/bootstrap-table.min.js"></script>

<script>
  const teste = {{{json teste}}};

  const tipos = [
    { nome: "REALISTA", valor: teste.resr, cor: "rgba(76, 175, 80, 0.6)" },
    { nome: "INVESTIGADOR", valor: teste.resi, cor: "rgba(33, 150, 243, 0.6)" },
    { nome: "ARTÍSTICO", valor: teste.resa, cor: "rgba(255, 193, 7, 0.6)" },
    { nome: "SOCIAL", valor: teste.ress, cor: "rgba(156, 39, 176, 0.6)" },
    { nome: "EMPREENDEDOR", valor: teste.rese, cor: "rgba(244, 67, 54, 0.6)" },
    { nome: "CONVENCIONAL", valor: teste.resc, cor: "rgba(0, 188, 212, 0.6)" }
  ];

  const maiorValor = Math.max(...tipos.map(t => t.valor));
  const maiores = tipos.filter(t => t.valor === maiorValor);

  let descricao = "Você é uma pessoa: ";
  maiores.forEach((t, i) => {
    if (i === 0) descricao += t.nome;
    else if (i === maiores.length - 1) descricao += " e " + t.nome;
    else descricao += ", " + t.nome;
  });

  document.getElementById("pessoa").textContent = descricao;

  const ctx = document.getElementById("meuGrafico").getContext("2d");
  new Chart(ctx, {
    type: "bar",
    data: {
      labels: tipos.map(t => t.nome),
      datasets: [{
        label: "Pontuação",
        data: tipos.map(t => t.valor),
        backgroundColor: tipos.map(t => t.cor),
        borderColor: "rgba(0,0,0,0.1)",
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      scales: { y: { beginAtZero: true, max: 75 } },
      plugins: { legend: { display: false } }
    }
  });

</script>
